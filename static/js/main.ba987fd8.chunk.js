(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{234:function(e,t,a){e.exports=a(416)},239:function(e,t,a){},241:function(e,t,a){},416:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),o=a.n(i),l=(a(239),a(22)),s=a(23),c=a(25),u=a(24),h=a(26),m=(a(241),a(109)),p=Object(m.a)({githubToken:"INSERT_YOUR_GITHUB_TOKEN",githubApiGraphQl:"https://api.github.com/graphql",githubApiUrl:"https://api.github.com",organizations:["eflon"]},function(){var e=localStorage.getItem("relator-app-config");return e?JSON.parse(e):{}}()),f=function(){return p},d=function(e){p=Object(m.a)({},p,e),localStorage.setItem("relator-app-config",JSON.stringify(p))},g=a(14),b=a.n(g),v=a(19),E=a(110),y=a(79);function k(){var e=Object(E.a)(['\n{\n    organization(login: "','") {\n      repositories(first: 100) {\n        nodes {\n          name\n          url\n        }\n      }\n    }\n  }  \n']);return k=function(){return e},e}function w(){var e=Object(E.a)(['\n{\norganization(login: "','") {\n  name\n  url\n  avatarUrl\n  repositories(first: 100) {\n    nodes {\n      name\n      url\n      refs(first: 100, refPrefix: "refs/heads/") {\n        nodes {\n          name\n          id\n          prefix\n          target {\n            commitUrl\n            oid\n            id\n            __typename\n            ... on Commit {\n              message\n              pushedDate\n              treeUrl\n            }\n          }\n        }\n      }\n    }\n  }\n}\n}  \n']);return w=function(){return e},e}var O=null,x=function(e){return null!==O?O:function(e,t){return O=new y.a({uri:t,headers:{Authorization:"token ".concat(e)}})}(e,f().githubApiGraphQl)},C=function(e,t){var a=e.match(t);return!(!a||1!==a.length)},j=function(){var e=Object(v.a)(b.a.mark(function e(t){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Array,e.next=3,t;case 3:return(n=e.sent).data.organization.repositories.nodes.forEach(function(e){e.refs.nodes.forEach(function(t){a.push({name:t.name,lastCommitHash:t.target.oid,commitUrl:t.target.commitUrl,pushedDate:t.target.pushedDate,version:null,feature:null,gitflow:{isFeature:C(t.name,/feature\//),isMaster:C(t.name,/master/),isHotfix:C(t.name,/hotfix\//),isRealease:C(t.name,/release\//),isDevelop:C(t.name,/develop/)},repository:{name:e.name,url:e.url,org:{name:n.data.organization.name,url:n.data.organization.url,avatarUrl:n.data.organization.avatarUrl}}})})}),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(v.a)(b.a.mark(function e(t){var a,n,r,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:a=new Array,n=0;case 4:if(!(n<t.length)){e.next=13;break}return r=t[n],e.next=8,S(r);case 8:i=e.sent,a=a.concat(i);case 10:n++,e.next=4;break;case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),S=function(e){return j(function(e){return x(f().githubToken).query({query:Object(y.b)(w(),e)})}(e))},z=function(){var e=Object(v.a)(b.a.mark(function e(t,a){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(f().githubApiUrl,"/repos/").concat(a.repository.org.name,"/").concat(a.repository.name,"/git/refs"),{method:"POST",body:JSON.stringify({ref:"refs/heads/".concat(t),sha:a.lastCommitHash}),headers:{Authorization:"token ".concat(f().githubToken)}});case 4:n=e.sent,console.log("createBranch",n);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(v.a)(b.a.mark(function e(t){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Array,e.next=3,t;case 3:return(n=e.sent).data.organization.repositories.nodes.forEach(function(e){a.push({name:e.name,url:e.url,org:{name:n.data.organization.name,url:n.data.organization.url,avatarUrl:n.data.organization.avatarUrl}})}),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),R=function(e){return N(x(f().githubToken).query({query:Object(y.b)(k(),e)}))},A=a(57),D=a.n(A),I=a(21),U=a.n(I),T=a(7),W=a(167),F=a.n(W),H={root:{width:"100%"},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"33.33%"},link:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},J=function(e){var t=e.branch;return r.a.createElement("div",{style:H.root},r.a.createElement(T.c,{defaultExpanded:!1},r.a.createElement(T.f,{expandIcon:r.a.createElement(F.a,null)},r.a.createElement("div",{style:H.column},r.a.createElement(T.o,null,t.repository.name)),r.a.createElement("div",{style:H.column},r.a.createElement(T.o,null,t.name))),r.a.createElement(T.e,{style:H.details},r.a.createElement("div",{style:H.column},r.a.createElement(T.o,null,"commit hash: ",t.lastCommitHash)),r.a.createElement("div",{style:H.column},r.a.createElement(T.o,null,t.repository.org.name)),r.a.createElement("div",{style:H.column},r.a.createElement(T.o,{variant:"caption"},"Select your destination of choice",r.a.createElement("br",null),r.a.createElement("a",{href:"#sub-labels-and-columns",style:H.link},"Learn more")))),r.a.createElement(T.b,null),r.a.createElement(T.d,null,r.a.createElement(T.a,{size:"small"},"Cancel"),r.a.createElement(T.a,{size:"small",color:"primary"},"Save"))))},P=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.branches,a=e.title;return r.a.createElement("div",null,r.a.createElement(D.a,{container:!0,spacing:16},r.a.createElement(D.a,{item:!0,xs:12},r.a.createElement(U.a,{variant:"h6"},a),0===t.length?r.a.createElement(U.a,null,"No branch"):t.map(function(e,t){return r.a.createElement(J,{branch:e,key:t})}))))}}]),t}(r.a.Component),M=a(34),_=a.n(M),q=a(37),G=a.n(q),L=a(71),V=a.n(L),Q=a(75),K=a.n(Q),Y=a(73),$=a.n(Y),X=a(74),Z=a.n(X),ee=a(72),te=a.n(ee),ae=a(168),ne=a.n(ae),re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleOrganizationChange=function(){var e=Object(v.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({selectedOrganization:t.target.value}),e.next=3,R(t.target.value);case 3:n=e.sent,a.setState({availableRepositories:n,selectedBaseBranch:"",selectedRepositoryName:""});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleRepositoryChange=function(){var e=Object(v.a)(b.a.mark(function e(t){var n,r,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,a.setState({selectedRepositoryName:n}),e.next=4,B([a.state.selectedOrganization]);case 4:r=e.sent,i=r.filter(function(e){return e.repository.name===n}),a.setState({availableBranches:i,selectedBaseBranch:""});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleBaseBranchChange=function(){var e=Object(v.a)(b.a.mark(function e(t){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({selectedBaseBranch:t.target.value});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={open:!1,newBranchName:"release/NEW_VERSION",availableRepositories:[],availableBranches:[],selectedOrganization:f().organizations[0],selectedRepositoryName:"",selectedBaseBranch:""},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(T.g,{color:"primary",variant:"extended","aria-label":"Create release",onClick:this.handleClickOpen},r.a.createElement(ne.a,null),"Create release"),r.a.createElement(V.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(te.a,{id:"form-dialog-title"},"Create next release"),r.a.createElement($.a,null,r.a.createElement(Z.a,null,"Create next release. May be a release or hotfix branch. Choose your organization, repository and branch name."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(T.h,{fullWidth:!0},r.a.createElement(G.a,{label:"organization",select:!0,value:this.state.selectedOrganization,onChange:this.handleOrganizationChange,inputProps:{name:"organization",id:"organization"},fullWidth:!0},f().organizations.map(function(e,t){return r.a.createElement(T.l,{key:t,value:e},e)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(T.h,{fullWidth:!0},r.a.createElement(G.a,{label:"repository",fullWidth:!0,select:!0,value:this.state.selectedRepositoryName,onChange:this.handleRepositoryChange,inputProps:{name:"repository",id:"repository"}},this.state.availableRepositories.map(function(e,t){return r.a.createElement(T.l,{key:t,value:e.name},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(T.h,{fullWidth:!0},r.a.createElement(G.a,{label:"baseBranch",fullWidth:!0,select:!0,value:this.state.selectedBaseBranch,onChange:this.handleBaseBranchChange,inputProps:{name:"baseBranch",id:"baseBranch"}},this.state.availableBranches.map(function(e,t){return r.a.createElement(T.l,{key:t,value:e.name},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(G.a,{autoFocus:!0,margin:"dense",id:"branchName",label:"Branch name",type:"text",fullWidth:!0,value:this.state.newBranchName,onChange:function(t){return e.setState({newBranchName:t.target.value})}})),r.a.createElement(K.a,null,r.a.createElement(_.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(_.a,{onClick:Object(v.a)(b.a.mark(function t(){return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.newBranchName||!e.state.selectedBaseBranch){t.next=4;break}return t.next=3,z(e.state.newBranchName,e.state.availableBranches.find(function(t){return t.name===e.state.selectedBaseBranch}));case 3:e.handleClose();case 4:case"end":return t.stop()}},t,this)})),color:"primary"},"Create"))))}}]),t}(r.a.Component),ie={container:{padding:16}},oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={branches:[],releases:!0,features:!0,productions:!0,developments:!0,others:!0,hotfix:!0},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(f().organizations);case 2:t=e.sent,this.setState({branches:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return this.state.features&&t.push(r.a.createElement(T.k,{key:"Features",item:!0,xs:12,sm:8,md:6,lg:4,xl:2},r.a.createElement(P,{title:"Features",branches:this.state.branches.filter(function(e){return e.gitflow.isFeature})}))),this.state.releases&&t.push(r.a.createElement(T.k,{key:"Releases",item:!0,xs:12,sm:8,md:6,lg:4,xl:2},r.a.createElement(P,{title:"Releases",branches:this.state.branches.filter(function(e){return e.gitflow.isRealease})}))),this.state.hotfix&&t.push(r.a.createElement(T.k,{key:"Hotfixes",item:!0,xs:12,sm:8,md:6,lg:4,xl:2},r.a.createElement(P,{title:"Hotfixes",branches:this.state.branches.filter(function(e){return e.gitflow.isHotfix})}))),this.state.developments&&t.push(r.a.createElement(T.k,{key:"Development",item:!0,xs:12,sm:8,md:6,lg:4,xl:2},r.a.createElement(P,{title:"Development",branches:this.state.branches.filter(function(e){return e.gitflow.isDevelop})}))),this.state.productions&&t.push(r.a.createElement(T.k,{key:"Production",item:!0,xs:12,sm:8,md:6,lg:4,xl:2},r.a.createElement(P,{title:"Production",branches:this.state.branches.filter(function(e){return e.gitflow.isMaster})}))),this.state.others&&t.push(r.a.createElement(T.k,{key:"Other",item:!0,xs:12,sm:8,md:6,lg:4,xl:2},r.a.createElement(P,{title:"Other",branches:this.state.branches.filter(function(e){return!e.gitflow.isMaster&&!e.gitflow.isDevelop&&!e.gitflow.isFeature&&!e.gitflow.isHotfix&&!e.gitflow.isRealease})}))),r.a.createElement("div",{style:ie.container},r.a.createElement(re,null),r.a.createElement(T.j,{row:!0},r.a.createElement(T.i,{control:r.a.createElement(T.m,{checked:this.state.productions,onChange:function(){e.setState({productions:!e.state.productions})},value:"checkedA"}),label:"Production"}),r.a.createElement(T.i,{control:r.a.createElement(T.m,{checked:this.state.features,onChange:function(){e.setState({features:!e.state.features})},value:"checkedA"}),label:"Features"}),r.a.createElement(T.i,{control:r.a.createElement(T.m,{checked:this.state.releases,onChange:function(){e.setState({releases:!e.state.releases})},value:"checkedA"}),label:"Releases"}),r.a.createElement(T.i,{control:r.a.createElement(T.m,{checked:this.state.others,onChange:function(){e.setState({others:!e.state.others})},value:"checkedA"}),label:"Others"}),r.a.createElement(T.i,{control:r.a.createElement(T.m,{checked:this.state.developments,onChange:function(){e.setState({developments:!e.state.developments})},value:"checkedA"}),label:"Developments"})),r.a.createElement(T.k,{container:!0,direction:"row",spacing:32},t))}}]),t}(r.a.Component),le=a(46),se=a(76),ce=a.n(se),ue=a(77),he=a.n(ue),me=a(36),pe=a.n(me),fe=a(33),de=a.n(fe),ge=a(35),be=a(20),ve=a(171),Ee=a.n(ve),ye=a(172),ke=a.n(ye),we=a(170),Oe=a.n(we),xe=a(58),Ce=Object(be.withStyles)(function(e){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(le.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(le.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ge.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ge.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(le.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}})(function(e){var t=e.classes;return t?r.a.createElement("div",{className:t.root},r.a.createElement(ce.a,{position:"static"},r.a.createElement(he.a,null,r.a.createElement(U.a,{className:t.title,variant:"h6",color:"inherit",noWrap:!0,onClick:function(){return Object(xe.b)("/gitflop/")}},"Git Flop"),r.a.createElement("div",{className:t.grow}),r.a.createElement("div",{className:t.search},r.a.createElement("div",{className:t.searchIcon},r.a.createElement(Oe.a,null)),r.a.createElement(de.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput}})),r.a.createElement(pe.a,{color:"inherit","aria-label":"settings",onClick:function(){return Object(xe.b)("/gitflop/configuration")}},r.a.createElement(Ee.a,null)),r.a.createElement(pe.a,{color:"inherit","aria-label":"settings",onClick:function(){d({githubToken:null}),location.reload()}},r.a.createElement(ke.a,null))))):r.a.createElement(r.a.Fragment,null)}),je={settings:{width:"100%"}},Be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={settingsValue:JSON.stringify(e.settings)},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.settings;return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.o,{variant:"h4"},"Settings"),r.a.createElement(T.n,{id:"outlined-multiline-static",label:"Settings",multiline:!0,rowsMax:"20",defaultValue:JSON.stringify(t,null,4),margin:"normal",variant:"standard",style:je.settings,onChange:function(t){return e.setState({settingsValue:t.target.value})}}),r.a.createElement(T.a,{variant:"contained",color:"secondary",onClick:function(){d(JSON.parse(e.state.settingsValue)),location.href="/"}},"Save"))}}]),t}(r.a.Component),Se=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(e){console.log(e)}},{key:"render",value:function(){f().githubToken;return n.createElement("div",{className:"App"},n.createElement(Ce,null),n.createElement(xe.a,null,n.createElement(Be,{path:"/gitflop/configuration",settings:f()}),n.createElement(oe,{path:"/gitflop/"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[234,2,1]]]);
//# sourceMappingURL=main.ba987fd8.chunk.js.map